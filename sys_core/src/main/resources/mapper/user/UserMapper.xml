<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.chen.core.user.mapper.UserMapper">

    <sql id="All_Column_List">
        id, openid, name, phone, sex, id_number, avatar, create_time
    </sql>

    <!--  新增用户信息  -->
    <insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="com.chen.core.user.entity.UserDO">
        INSERT INTO user (openid, create_time)
        VALUES (#{openid}, #{createTime})
    </insert>

    <!--  根据微信唯一标识获取用户  -->
    <select id="getByOpenId" parameterType="java.lang.String" resultType="com.chen.core.user.entity.UserDO">
        SELECT <include refid="All_Column_List"/>
        FROM user
        WHERE openid = #{openId}
    </select>

</mapper>
